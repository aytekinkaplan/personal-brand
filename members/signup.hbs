{{!< ../default}}  <!-- Indicates that we're using the default template -->

<div class="gh-page">
    <div class="gh-container">

        {{#if @member.paid}}

        {{!-- User is already a paid subscriber: Redirect to homepage --}}
        <script>window.location = '{{@site.url}}';</script>

        {{else if @member}}

        {{!-- User is logged in but not a paid subscriber: Show subscription options --}}
        <div class="gh-checkout-form">
            <h1 class="gh-checkout-title">Choose Your Subscription</h1>
            <p>Select a subscription to access all exclusive content and updates from {{@site.title}}</p>
            <div class="gh-checkout-box">
                {{#get "tiers" include="monthly_price, yearly_price" limit="all" as |tiers|}}
                    {{#foreach tiers}}
                    <div class="gh-checkout-plan">
                        <header class="gh-checkout-plan-header">
                            <h3>{{name}}</h3>
                            {{#if monthly_price}}
                            <span>$</span><strong>{{monthly_price}}</strong> / month
                            {{/if}}
                            {{#if yearly_price}}
                            <span>$</span><strong>{{yearly_price}}</strong> / year
                            {{/if}}
                        </header>
                        <div class="gh-checkout-plan-content">
                            {{#if benefits}}
                            <ul>
                                {{#foreach benefits as |benefit|}}
                                <li>{{benefit}}</li>
                                {{/foreach}}
                            </ul>
                            {{/if}}

                            {{#if monthly_price}}
                            <a class="button primary fit" href="javascript:void(0)" data-members-plan="Monthly">Choose This Plan</a>
                            {{/if}}
                            {{#if yearly_price}}
                            <a class="button primary fit" href="javascript:void(0)" data-members-plan="Yearly">Choose This Plan</a>
                            {{/if}}
                        </div>
                    </div>
                    {{/foreach}}
                {{/get}}
            </div>
        </div>

        {{else}}

        {{!-- User not logged in: Show signup form --}}
        <form class="gh-auth-form" data-members-form="signup">
            <h1 class="gh-auth-title">Sign Up for {{@site.title}}</h1>
            <p>{{@site.description}}</p>
            <div class="gh-auth-box">
                <input aria-label="Email Address" class="gh-input" data-members-email type="email"
                    placeholder="email@example.com" required="true" autocomplete="off" autofocus />
                <button class="gh-button gh-button-primary" type="submit">
                    <span class="gh-button-content">Continue</span>
                    <span class="gh-button-loader">{{> "icons/loader"}}</span>
                </button>
            </div>
            <p><small>Already have an account? <a href="/signin/">Sign in</a></small></p>
            <div class="message-success"><strong>Great!</strong> Check your email and click the link to confirm your subscription</div>
            <div class="message-error">Please enter a valid email address!</div>
        </form>

        {{/if}}

    </div>
</div>